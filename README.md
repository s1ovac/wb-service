<!DOCTYPE html>
<header>
    <h1>
        wb-service &#128187
    </h1>
    <h3>
        Задание:
    </h3>
</header>
<body>
    <h3>
        В БД: &#9989;
    </h3>
    <ul>
        <li>Развернуть локально postgresql &#9989;</li>
        <li>Создать свою бд &#9989;</li>
        <li>Настроить своего пользователя. &#9989;</li>
        <li>Создать таблицы для хранения полученных данных. &#9989;</li>
    </ul> 
    <h3>
        В сервисе:
    </h3>
    <ol>
        <li>Подключение и подписка на канал в nats-streaming &#9989;</li>
        <li>Полученные данные писать в Postgres &#9989;</li>
        <li>Так же полученные данные сохранить in memory в сервисе (Кеш) &#9989;</li>
        <li>В случае падения сервиса восстанавливать Кеш из Postgres &#9989;</li>
        <li>Поднять http сервер и выдавать данные по id из кеша &#9989;</li>
        <li>Сделать простейший интерфейс отображения полученных данных, для их запроса по id &#9989;</li>
    </ol>
    <h4>
        Доп инфо: 
    </h4>
    <ul>
        <li>Данные статичны, исходя из этого подумайте насчет модели хранения в Кеше и в pg. Модель в файле model.json &#9989;</li>
        <li>В канал могут закинуть что угодно, подумайте как избежать проблем из-за этого &#9989;</li>
        <li>Чтобы проверить работает ли подписка онлайн, сделайте себе отдельный скрипт, для публикации данных в канал &#9989;</li>
        <li>Подумайте как не терять данные в случае ошибок или проблем с сервисом &#9989;</li>
        <li>Nats-streaming разверните локально ( не путать с Nats ) &#9989;</li>
    </ul>
</body>

#### Запуск сервиса
```shell
make start-docker
make run-subscriber
```
#### Запуск издателя (Docker должен быть запущен `make start-docker`)
```shell
make run-publisher
```
#### Остановка Docker
```shell
make stop-docker
```

### Работа:
___

По умолчанию доступ к данным в кэше через http осуществляется следующим запросом:
`localhost:8080/orders/:id`

Для записи данных в NATS необходимо указать путь к файлу JSON с моделью. Данные для проверки лежат в корневой дирректории.